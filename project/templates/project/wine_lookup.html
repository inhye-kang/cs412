{% extends "project/base.html" %}

{% block content %}
<h2 class="mb-4">Wine Lookup</h2>

<!-- Search Form -->
<form method="get" class="wine-search-form p-4 rounded shadow-sm">
    <div class="row g-3">
        <!-- Category Filter -->
        <div class="col-md-3">
            <label for="category" class="form-label">Category</label>
            <select id="category" name="category" class="form-select">
                <option value="">Select Category</option>
                {% for cat in category_choices %}
                <option value="{{ cat }}" {% if cat == category_search %}selected{% endif %}>{{ cat }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- Min Price Filter -->
        <div class="col-md-2">
            <label for="min_price" class="form-label">Min Price</label>
            <input type="number" id="min_price" name="min_price" class="form-control" step="0.01" value="{{ min_price }}">
        </div>
        
        <!-- Max Price Filter -->
        <div class="col-md-2">
            <label for="max_price" class="form-label">Max Price</label>
            <input type="number" id="max_price" name="max_price" class="form-control" step="0.01" value="{{ max_price }}">
        </div>

        <!-- Min Rating Filter -->
        <div class="col-md-2">
            <label for="min_rating" class="form-label">Min Rating</label>
            <input type="number" id="min_rating" name="min_rating" class="form-control" value="{{ min_rating }}">
        </div>

        <!-- Alcohol Content Filter -->
        <div class="col-md-3">
            <label for="alcohol_content" class="form-label">Alcohol Content</label>
            <input type="text" id="alcohol_content" name="alcohol_content" class="form-control" placeholder="e.g., 13.5" value="{{ alcohol_content }}">
        </div>

        <!-- Country Filter -->
        <div class="col-md-3">
            <label for="country" class="form-label">Country</label>
            <input type="text" id="country" name="country" class="form-control" placeholder="Search by country" value="{{ country_search }}">
        </div>
    </div>
    <!-- Search Button -->
    <button type="submit" class="btn btn-primary mt-4">Search</button>
</form>


<!-- Display Recommended Wines -->
<div class="wine-card-container mt-4 row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
    {% for wine in random_wines %}
    <div class="col">
        <div class="wine-card p-4 border rounded shadow-sm bg-white">
            <!-- Wine Information -->
            <h4 class="fw-bold">{{ wine.wine }}</h4>
            <p class="text-muted mb-1"><strong>Category:</strong> {{ wine.category|default:"Not specified" }}</p>
            <p class="text-muted mb-1"><strong>Varietal:</strong> {{ wine.varietal|default:"Not specified" }}</p>
            <p class="text-muted mb-1"><strong>Price:</strong> {{ wine.price|default:"N/A" }}</p>
            <p class="text-muted mb-1"><strong>Rating:</strong> {{ wine.rating|default:"N/A" }}</p>
            <p class="text-muted mb-1"><strong>Alcohol:</strong> {{ wine.alcohol|default:"N/A" }}</p>
            <p class="text-muted"><strong>Review:</strong> {{ wine.review|default:"No review available" }}</p>
        </div>
    </div>
    {% empty %}
    <!-- No Results Found -->
    <p>No wines found matching the search criteria.</p>
    {% endfor %}
</div>

{% endblock %}


<style>
    /* Wine Search Form */
    .wine-search-form {
        background: #f8f9fa;
        border: 1px solid #ccc;
    }

    /* Wine Card Container */
    .wine-card-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
    }

    /* Wine Card */
    .wine-card {
        background: white;
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 20px;
        text-align: left;
        transition: all 0.3s ease-in-out;
    }

    /* Wine Card Title */
    .wine-card h4 {
        color: #333;
    }

    /* Wine Card Text */
    .wine-card p {
        margin: 5px 0;
    }

    /* Submit Button */
    .btn-primary {
        padding: 10px 20px;
        font-size: 16px;
    }
</style>